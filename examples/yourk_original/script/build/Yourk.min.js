/*! Yourk v1.0.0 - 2014-07-22 
 *  Copyright: Peter Szerzo, 2014 */


var DCHISEL={isFullScreenApp:!1,stage:{no:0,change:function(a){this.no+=a,this.no=Math.round(10*this.no)/10,DCHISEL.time0=DCHISEL.time,"undefined"!=typeof DCHISEL.nav.current()&&(DCHISEL.mode=DCHISEL.nav.current().defaultMode),DCHISEL.nav.mouseMove()},set:function(a){this.no=Math.round(10*a)/10,DCHISEL.time0=DCHISEL.time,"undefined"!=typeof DCHISEL.nav.current()&&(DCHISEL.mode=DCHISEL.nav.current().defaultMode),DCHISEL.nav.mouseMove()}},mode:"mode3",time0:(new Date).getTime(),time:0,interval:10,anim:{speed:2e3,delay:500},fonts:"Monaco",colors:{schemes:{purple:[[61,56,79],[247,141,52],[203,168,114],[61,103,196],[95,52,247],[61,103,196],[95,90,113],[255,255,255]],bw:[[255,255,255],[0,0,0],[30,30,30],[70,70,70],[50,50,50],[20,20,20],[200,200,200],[100,100,100]]},activeScheme:"purple",get:function(a,b){return"rgba("+this.schemes[this.activeScheme][a][0]+","+this.schemes[this.activeScheme][a][1]+","+this.schemes[this.activeScheme][a][2]+","+b+")"},getBetween:function(a,b,c,d){var e=[this.schemes[this.activeScheme][a][0]*c+this.schemes[this.activeScheme][a][0]*(1-c),this.schemes[this.activeScheme][a][1]*c+this.schemes[this.activeScheme][a][1]*(1-c),this.schemes[this.activeScheme][a][2]*c+this.schemes[this.activeScheme][a][2]*(1-c)];return"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+d+")"}},canvas:void 0,ctx:void 0,mouse:{x:0,y:0,z:0,xDrag:0,yDrag:0,isDragging:!1},wDisplay:{path:.005,navButton:.03,text:1/80},rDim:{l:150,w:0,d:3,depthScale:10},mesh:{n1:100,n2:30,nP:3},masterPiece:{},W:0,H:0,minWH:0};DCHISEL.touchHandler=function(a){var b=a.changedTouches[0],c=document.createEvent("MouseEvent");c.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[a.type],!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(c),a.preventDefault()},DCHISEL.init=function(a,b,c){this.isFullScreenApp=b||!1,this.containerID=a||"wrapper",this.container=$("#"+this.containerID),this.colors.activeScheme=c,this.isFullScreenApp&&document.body.setAttribute("style","background-color:"+DCHISEL.colors.get(0,1)),document.addEventListener("touchstart",DCHISEL.touchHandler,!0),document.addEventListener("touchmove",DCHISEL.touchHandler,!0),document.addEventListener("touchend",DCHISEL.touchHandler,!0),document.addEventListener("touchcancel",DCHISEL.touchHandler,!0),this.canvas=document.createElement("canvas"),this.container.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.lineCap="round",$(this.canvas).css("border-radius","inherit").css("margin","auto"),DCHISEL.canvas.addEventListener("mousedown",DCHISEL.mouseDown),DCHISEL.canvas.addEventListener("mousemove",DCHISEL.mouseMove),DCHISEL.canvas.addEventListener("mouseup",DCHISEL.mouseUp),window.addEventListener("resize",DCHISEL.resize,!1),this.resize(this.isFullScreenApp)},DCHISEL.launch=function(){setInterval(DCHISEL.draw,DCHISEL.interval)},DCHISEL.resize=function(){if(DCHISEL.W=DCHISEL.container.width(),DCHISEL.H=DCHISEL.container.height(),DCHISEL.isFullScreenApp){var a=750,b=500;DCHISEL.W<a&&DCHISEL.H<b?(DCHISEL.W=a,DCHISEL.H=b):DCHISEL.W<a?DCHISEL.W=a:DCHISEL.H<b&&(DCHISEL.H=b),DCHISEL.W<2*DCHISEL.H&&(DCHISEL.W=2*DCHISEL.H)}DCHISEL.minWH=Math.min(DCHISEL.W,DCHISEL.H),DCHISEL.canvas.width=DCHISEL.W,DCHISEL.canvas.height=DCHISEL.H},DCHISEL.prepDraw=function(){DCHISEL.ctx.fillStyle=DCHISEL.colors.get(0,1),DCHISEL.pen.solidRect(0,0,DCHISEL.W,DCHISEL.H),DCHISEL.ctx.textAlign="center",DCHISEL.ctx.textBaseline="middle",DCHISEL.time=(new Date).getTime()},DCHISEL.updateMouse=function(a,b){var c=DCHISEL.canvas.getBoundingClientRect();DCHISEL.mouse.x=a.clientX-c.left,DCHISEL.mouse.y=a.clientY-c.top,"down"===b?(DCHISEL.mouse.isDragging=!0,DCHISEL.mouse.xDrag=DCHISEL.mouse.x,DCHISEL.mouse.yDrag=DCHISEL.mouse.y):"up"===b&&(DCHISEL.mouse.isDragging=!1)},DCHISEL.map=function(a,b){return new DCHISEL.Vector(a*DCHISEL.W,b*DCHISEL.H,0)},DCHISEL.getDistancePP=function(a,b,c,d,e){var f=Math.pow(Math.pow(a-d,2)+Math.pow(b-e,2),.5);return f},DCHISEL.getDistanceVV=function(a,b){var c=Math.pow(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2)+Math.pow(a.z-b.z,2),.5);return c},DCHISEL.pen={solidRect:function(a,b,c,d){DCHISEL.ctx.beginPath(),DCHISEL.ctx.rect(a,b,c,d),DCHISEL.ctx.closePath(),DCHISEL.ctx.fill()},write:function(a,b,c,d,e,f){DCHISEL.ctx.fillStyle=DCHISEL.colors.get(e,f),DCHISEL.ctx.font=""+DCHISEL.W*DCHISEL.wDisplay.text*d+"px "+DCHISEL.fonts,DCHISEL.ctx.fillText(a,DCHISEL.W*b,DCHISEL.H*c)},start:function(){DCHISEL.ctx.beginPath()},end:function(){DCHISEL.ctx.stroke()},moveTo:function(a){DCHISEL.ctx.moveTo(a.x,a.y)},lineTo:function(a){DCHISEL.ctx.lineTo(a.x,a.y)},line:function(a,b){this.start(),this.moveTo(a),this.lineTo(b),this.end()},splineTo:function(a,b,c){DCHISEL.ctx.bezierCurveTo(a.x,a.y,b.x,b.y,c.x,c.y)},solidCircle:function(a,b,c){b="r"===c?b*DCHISEL.wDisplay.path*DCHISEL.minWH:b,DCHISEL.ctx.beginPath(),DCHISEL.ctx.arc(a.x,a.y,b,0,2*Math.PI,!0),DCHISEL.ctx.fill()},stroke:function(a){DCHISEL.ctx.lineWidth=a*DCHISEL.wDisplay.path*DCHISEL.minWH},color:{stroke:function(a,b){DCHISEL.ctx.strokeStyle=DCHISEL.colors.get(a,b||1)},fill:function(a,b){DCHISEL.ctx.fillStyle=DCHISEL.colors.get(a,b||1)}},animateCircle:function(a,b,c,d,e,f,g,h){var i,j;DCHISEL.time-DCHISEL.time0>=g&&DCHISEL.time-DCHISEL.time0<=h&&(j=(h-DCHISEL.time+DCHISEL.time0)/(h-g),i=c*j+d*(1-j),DCHISEL.ctx.strokeStyle=DCHISEL.colors.getBetween(e,f,j,j),DCHISEL.ctx.lineWidth=DCHISEL.minWH/200,DCHISEL.ctx.beginPath(),DCHISEL.ctx.arc(DCHISEL.map(a,b).x,DCHISEL.map(a,b).y,i*DCHISEL.minWH,0,2*Math.PI),DCHISEL.ctx.stroke())},boundingBox:function(a,b,c,d,e){DCHISEL.ctx.beginPath(),DCHISEL.ctx.moveTo(a+e,b),DCHISEL.ctx.lineTo(a+c-e,b),DCHISEL.ctx.closePath(),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.lineTo(a+c,b+e),DCHISEL.ctx.lineTo(a+c,b+d-e),DCHISEL.ctx.closePath(),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.lineTo(a+c-e,b+d),DCHISEL.ctx.lineTo(a+e,b+d),DCHISEL.ctx.closePath(),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.lineTo(a,b+d-e),DCHISEL.ctx.lineTo(a,b+e),DCHISEL.ctx.closePath(),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.arc(a+e,b+e,e,Math.PI,1.5*Math.PI),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.arc(a+c-e,b+e,e,1.5*Math.PI,2*Math.PI),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.arc(a+e,b+d-e,e,Math.PI/2,1*Math.PI),DCHISEL.ctx.stroke(),DCHISEL.ctx.beginPath(),DCHISEL.ctx.arc(a+c-e,b+d-e,e,2*Math.PI,2.5*Math.PI),DCHISEL.ctx.stroke()}},DCHISEL.getAngle=function(a,b,c,d){var e;return Math.abs(a-c)<1e-5&&d>b?Math.PI/2:Math.abs(a-c)<1e-5&&b>d?3*Math.PI/2:(e=Math.atan((d-b)/(c-a)),c>a?0>e?e+2*Math.PI:e:e+Math.PI)},DCHISEL.sineAnimate=function(a,b,c,d){return Math.sin(DCHISEL.time-DCHISEL.time0<c?0/a*2*Math.PI+b:DCHISEL.time-DCHISEL.time0>d?(d-c)/a*2*Math.PI+b:(DCHISEL.time-DCHISEL.time0-c)/a*2*Math.PI+b)},DCHISEL.interpolateX=function(a,b){var c,d,e,f,g,h;if(b<=a[0].x)return a[0].y;if(b>=a[a.length-1].x)return a[a.length-1].y;for(j=-1,i=0;i<a.length-1;i++)a[i].x<b&&a[i+1].x>b&&(j=i),a[i].x>b&&a[i+1].x<b&&(j=i);return-1!==j?(e=b,c=a[j].x,d=a[j+1].x,f=a[j].y,g=a[j+1].y,h=f+(g-f)*(e-c)/(d-c)):0},DCHISEL.Vector=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0},DCHISEL.Vector.prototype={normalize:function(){var a=Math.pow(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2),.5);this.x=this.x/a,this.y=this.y/a,this.z=this.z/a},scale:function(a){var b=new DCHISEL.Vector(this.x*a,this.y*a,this.z*a);return b},dotProduct:function(a){var b=this.x*a.x+this.y*a.y+this.z*a.z;return b},crossProduct:function(a){var b=new DCHISEL.Vector(this.y*a.z-this.z*a.y,-this.x*a.z+this.z*a.x,this.x*a.y-this.y*a.x);return b},add:function(a){return new DCHISEL.Vector(this.x+a.x,this.y+a.y,this.z+a.z)},subtract:function(a){return new DCHISEL.Vector(this.x-a.x,this.y-a.y,this.z-a.z)},copy:function(a){return"undefined"!=typeof a?new DCHISEL.Vector(this.x+(a.x||0),this.y+(a.y||0),this.z+(a.z||0)):new DCHISEL.Vector(this.x,this.y,this.z)}},DCHISEL.Camera=function(a,b,c,d){this.r=a,this.theta=b,this.phi=c,this.rT=a,this.thetaT=b,this.phiT=c,this.f=d,this.v1=new DCHISEL.Vector(1,0,0),this.v2=new DCHISEL.Vector(1,0,0),this.v3=new DCHISEL.Vector(1,0,0)},DCHISEL.Camera.prototype={buildEye:function(){this.eye=new DCHISEL.Vector(this.rT*Math.cos(this.thetaT)*Math.cos(this.phiT),this.rT*Math.sin(this.thetaT)*Math.cos(this.phiT),this.rT*Math.sin(this.phiT)),this.v1=this.eye.scale(-1),this.v2=this.v1.crossProduct(new DCHISEL.Vector(0,0,1)),this.v3=this.v2.crossProduct(this.v1),this.v1.normalize(),this.v2.normalize(),this.v3.normalize()},update:function(){this.r=this.rT,this.theta=this.thetaT,this.phi=this.phiT,this.buildEye()},project:function(a){var b,c,d,e,f;return b=this.eye.subtract(a).dotProduct(this.v2),c=this.eye.subtract(a).dotProduct(this.v3),d=this.eye.subtract(a).dotProduct(this.v1),e=b*this.f/d,f=c*this.f/d,new DCHISEL.Vector(e,f,0)},mouseMove:function(){DCHISEL.mouse.isDragging&&(this.thetaT=this.theta-(DCHISEL.mouse.x-DCHISEL.mouse.xDrag)/DCHISEL.minWH*2,this.phiT=this.phi-(DCHISEL.mouse.y-DCHISEL.mouse.yDrag)/DCHISEL.minWH*2,this.phiT<-80*Math.PI/180&&(this.phiT=-80*Math.PI/180),this.phiT>80*Math.PI/180&&(this.phiT=80*Math.PI/180),this.buildEye())}},DCHISEL.MenuButton=function(a,b,c,d){this.name=c,this.isActive=!1,this.opacity=.4,this.x=a,this.y=b,this.w=DCHISEL.wDisplay.navButton,this.h=DCHISEL.wDisplay.navButton,this.animate=d||!1},DCHISEL.MenuButton.prototype={place:function(){this.isActive?(this.opacity+=.03*(1-this.opacity),DCHISEL.ctx.globalAlpha=this.opacity):(this.opacity+=.03*(.4-this.opacity),DCHISEL.ctx.globalAlpha=this.opacity),DCHISEL.ctx.drawImage(DCHISEL.allButtons[this.name].image,DCHISEL.map(this.x,this.y).x-this.w*DCHISEL.W/2,DCHISEL.map(this.x,this.y).y-this.h*DCHISEL.W/2,this.w*DCHISEL.W,this.h*DCHISEL.W),DCHISEL.ctx.globalAlpha=1,this.animate&&DCHISEL.pen.animateCircle(this.x,this.y,.05,.12,2,0,DCHISEL.anim.delay,DCHISEL.anim.delay+500)}},DCHISEL.Navigation=function(a){var b,c,d;for(this.buttons=[],b=0,d=a.buttons.length;d>b;b++)c=new DCHISEL.MenuButton(a.buttons[b].x,a.buttons[b].y,a.buttons[b].name,a.buttons[b].animate),this.buttons.push(c);this.displayHelp=a.displayHelp,this.helpX=a.xHelp,this.helpY=a.yHelp,this.buttonGroups=[],this.defaultMode=a.defaultMode},DCHISEL.Navigation.prototype={mouseDown:function(){-1!==this.hoverIndex&&"undefined"!=typeof this.hoverIndex&&DCHISEL.allButtons[this.buttons[this.hoverIndex].name].onClick()},mouseMove:function(){var a,b,c=!1;for(a=0,b=this.buttons.length;b>a;a+=1)Math.abs(DCHISEL.mouse.x-DCHISEL.map(this.buttons[a].x,this.buttons[a].y).x)<this.buttons[a].w*DCHISEL.W/2&&Math.abs(DCHISEL.mouse.y-DCHISEL.map(this.buttons[a].x,this.buttons[a].y).y)<this.buttons[a].h*DCHISEL.W/2?(this.hoverIndex=a,this.buttons[a].isActive=!0,c=!0):this.buttons[a].isActive=!1,this.buttons[a].name===DCHISEL.mode&&(this.buttons[a].isActive=!0);c===!1&&(this.hoverIndex=-1)},place:function(){var a,b,c,d,e,f;for(e=0,f=this.buttons.length;f>e;e+=1)this.buttons[e].place();for(this.displayHelp&&-1!==this.hoverIndex&&"undefined"!=typeof this.hoverIndex&&DCHISEL.pen.write(DCHISEL.allButtons[this.buttons[this.hoverIndex].name].helpText,this.helpX,this.helpY,1,2,(this.buttons[this.hoverIndex].opacity-.4)/.6),e=0,f=this.buttonGroups.length;f>e;e+=1){a=-10,b=-10,c=10,d=10;for(var g=0;g<this.buttonGroups[e].length;g++)a<this.buttons[this.buttonGroups[e][g]].x&&(a=this.buttons[this.buttonGroups[e][g]].x),b<this.buttons[this.buttonGroups[e][g]].y&&(b=this.buttons[this.buttonGroups[e][g]].y),c>this.buttons[this.buttonGroups[e][g]].x&&(c=this.buttons[this.buttonGroups[e][g]].x),d>this.buttons[this.buttonGroups[e][g]].y&&(d=this.buttons[this.buttonGroups[e][g]].y);a>-10&&(DCHISEL.pen.stroke(.7),DCHISEL.pen.color.stroke(6,.7),DCHISEL.pen.boundingBox(DCHISEL.map(c,d).x-DCHISEL.wDisplay.navButton*DCHISEL.W/2*1.3,DCHISEL.map(c,d).y-DCHISEL.wDisplay.navButton*DCHISEL.W/2*1.3,DCHISEL.map(a-c,b-d).x+DCHISEL.wDisplay.navButton*DCHISEL.W*1.3,DCHISEL.map(a-c,b-d).y+DCHISEL.wDisplay.navButton*DCHISEL.W*1.3,.025*DCHISEL.minWH))}}},DCHISEL.BezierHandle=function(a,b,c){this.d1=DCHISEL.getDistanceVV(a,b),this.d3=DCHISEL.getDistanceVV(c,b),this.kink1=this.d1<this.tol,this.kink3=this.d3<this.tol,this.p1=a.copy(),this.p2=b.copy(),this.p3=c.copy(),this.p1T=this.p1.copy(),this.p2T=this.p2.copy(),this.p3T=this.p3.copy(),this.n=5},DCHISEL.BezierHandle.prototype={update:function(){this.p1=this.p1T.copy(),this.p2=this.p2T.copy(),this.p3=this.p3T.copy(),this.d1=DCHISEL.getDistanceVV(this.p1T,this.p2T),this.d3=DCHISEL.getDistanceVV(this.p3T,this.p2T),this.kink1=this.d1<this.tol,this.kink3=this.d3<this.tol},normalize1T:function(a){this.p1T.x=this.p2T.x+(this.p1T.x-this.p2T.x)*a/DCHISEL.getDistanceVV(this.p1T,this.p2T),this.p1T.y=this.p2T.y+(this.p1T.y-this.p2T.y)*a/DCHISEL.getDistanceVV(this.p1T,this.p2T)},normalize3T:function(a){this.p3T.x=this.p2T.x+(this.p3T.x-this.p2T.x)*a/DCHISEL.getDistanceVV(this.p3T,this.p2T),this.p3T.y=this.p2T.y+(this.p3T.y-this.p2T.y)*a/DCHISEL.getDistanceVV(this.p3T,this.p2T)},smooth:function(){var a;a=this.p3T.x===this.p1T.x?100:(this.p3T.y-this.p1T.y)/(this.p3T.x-this.p1T.x),k=this.p3T.x>this.p2T.x?1:-1,this.p3T.x=this.p2T.x+1*k,this.p3T.y=this.p2T.y+k*a,this.p1T.x=this.p2T.x-1*k,this.p1T.y=this.p2T.y-k*a,this.normalize3T(this.d3),this.normalize1T(this.d1),this.update()}},DCHISEL.svgPathToBezierObject=function(a,b){var c,d,e,f,g,h,i,j,k,l=[],m=[],n=[],o=[],p="";for(j=0,max=a.length;max>j;j+=1)c=a.charAt(j),"M"===c||"m"===c||"C"===c||"c"===c||"S"===c||"s"===c?(""!==p&&l.push(parseFloat(p)),l.push(c),p=""):","===c?(""!==p&&l.push(parseFloat(p)),p=""):"-"===c?(""!==p&&l.push(parseFloat(p)),p="-"):p+=c;for(""!==p&&l.push(parseFloat(p)),m=l,k=-1,j=0,max=l.length;max>j;j+=1)"c"===l[j]||"s"===l[j]?(k=j,m[j]=l[j].toUpperCase()):"C"===l[j]||"S"===l[j]?(k=-1,m[j]=l[j]):m[j]=-1===k?l[j]:(j-k)%2===0?l[j]+l[k-1]:l[j]+l[k-2];for(j=0,max=m.length;max>j;j+=1)"S"===m[j]?(n.push("C"),n.push(2*m[j-2]-m[j-4]),n.push(2*m[j-1]-m[j-3])):n.push(m[j]);for(j=3,max=n.length;max>j;j+=1)if("C"===n[j]){if(j>3)d=n[j-4],e=n[j-3],f=n[j-2],g=n[j-1],h=n[j+1],i=n[j+2];else{if(3!==j)continue;d=n[j-2],e=n[j-1],f=n[j-2],g=n[j-1],h=n[j+1],i=n[j+2]}o.push(new DCHISEL.BezierHandle(new DCHISEL.Vector(d*Math.cos(b)+e*Math.sin(b),d*Math.sin(b)-e*Math.cos(b),0),new DCHISEL.Vector(f*Math.cos(b)+g*Math.sin(b),f*Math.sin(b)-g*Math.cos(b),0),new DCHISEL.Vector(h*Math.cos(b)+i*Math.sin(b),h*Math.sin(b)-i*Math.cos(b),0)))}return o},DCHISEL.BezierObject=function(a,b,c,d,e,f,g){this.tol=.02,this.control="string"==typeof a?DCHISEL.svgPathToBezierObject(a,b):a,this.theta=b,this.hoverIndex=-1,this.hoverType=-1,this.p0=new DCHISEL.Vector(c||0,d||0,0),this.p0T=new DCHISEL.Vector(c||0,d||0,0),this.scale=e||1,this.map=function(a){return new DCHISEL.Vector(0*(window.innerWidth-DCHISEL.W)/2+this.p0T.x*DCHISEL.W+a.x*DCHISEL.minWH*this.scale,this.p0T.y*DCHISEL.H+a.y*DCHISEL.minWH*this.scale,0)},this.isClosed=f||!1,this.constrainedEnds=g||!1,this.allow={draw:!0,edit:!0,pan:!0}},DCHISEL.BezierObject.prototype={normalize:function(){var a,b=-5e3,c=-5e3,d=5e3,e=5e3;for(i=0,a=this.control.length;a>i;i+=1)Math.max(this.control[i].p1T.x,this.control[i].p2T.x,this.control[i].p3T.x)>b&&(b=Math.max(this.control[i].p1T.x,this.control[i].p2T.x,this.control[i].p3T.x)),Math.min(this.control[i].p1T.x,this.control[i].p2T.x,this.control[i].p3T.x)<d&&(d=Math.min(this.control[i].p1T.x,this.control[i].p2T.x,this.control[i].p3T.x)),Math.max(this.control[i].p1T.y,this.control[i].p2T.y,this.control[i].p3T.y)>c&&(c=Math.max(this.control[i].p1T.y,this.control[i].p2T.y,this.control[i].p3T.y)),Math.min(this.control[i].p1T.y,this.control[i].p2T.y,this.control[i].p3T.y)<e&&(e=Math.min(this.control[i].p1T.y,this.control[i].p2T.y,this.control[i].p3T.y));for(i=0,a=this.control.length;a>i;i+=1)this.control[i].p1T.x=(this.control[i].p1T.x-(b+d)/2)/(b-d),this.control[i].p2T.x=(this.control[i].p2T.x-(b+d)/2)/(b-d),this.control[i].p3T.x=(this.control[i].p3T.x-(b+d)/2)/(b-d),this.control[i].p1T.y=(this.control[i].p1T.y-(c+e)/2)/(b-d),this.control[i].p2T.y=(this.control[i].p2T.y-(c+e)/2)/(b-d),this.control[i].p3T.y=(this.control[i].p3T.y-(c+e)/2)/(b-d),this.control[i].update()},setSubdivisions:function(a){var b,c,d,e=0,f=[];for(d=0,b=this.control.length;b>d;d+=1)c=this.getSegmentLength(d),f.push(c),c>e&&(e=c);for(d=0,b=this.control.length;b>d;d+=1)this.control[d].n=Math.floor(f[d]/e*a)},getSegmentLength:function(a,b){var c,d=0,e=b||10;for(c=0;e>c;c+=1)p1=this.getPoint(a,c/e),p2=this.getPoint(a,(c+1)/e),d+=DCHISEL.getDistanceVV(p1,p2);return d},getPoint:function(a,b){var c,d,e,f;return c=this.control[a].p2T.copy(),d=this.control[a].p3T.copy(),a===this.control.length-1?(e=this.control[0].p1T.copy(),f=this.control[0].p2T.copy()):(e=this.control[a+1].p1T.copy(),f=this.control[a+1].p2T.copy()),new DCHISEL.Vector(c.x*(1-b)*(1-b)*(1-b)+3*d.x*(1-b)*(1-b)*b+3*e.x*(1-b)*b*b+f.x*b*b*b,c.y*(1-b)*(1-b)*(1-b)+3*d.y*(1-b)*(1-b)*b+3*e.y*(1-b)*b*b+f.y*b*b*b,c.z*(1-b)*(1-b)*(1-b)+3*d.z*(1-b)*(1-b)*b+3*e.z*(1-b)*b*b+f.z*b*b*b)},divide:function(a){var b,c,d=[];for(b=this.isClosed?this.control.length:this.control.length-1,i=0;b>i;i+=1)for(c=a||this.control[i].n,j=0;c>j;j++)d.push(this.getPoint(i,j/(c-1)));return d},draw:function(a,b,c){var d,e;for(DCHISEL.pen.color.stroke(7,1),DCHISEL.pen.start(),DCHISEL.pen.moveTo(this.map(this.control[0].p2T)),d=1,e=this.control.length;e>d;d++)DCHISEL.pen.splineTo(this.map(this.control[d-1].p3T),this.map(this.control[d].p1T),this.map(this.control[d].p2T));if(this.isClosed&&DCHISEL.pen.splineTo(this.map(this.control[this.control.length-1].p3T),this.map(this.control[0].p1T),this.map(this.control[0].p2T)),DCHISEL.pen.stroke(a),DCHISEL.pen.end(),0!==b)for(d=0,e=this.control.length;e>d;d++)DCHISEL.pen.color.fill(4,1),DCHISEL.pen.stroke(c),(d>0||this.isClosed)&&(DCHISEL.pen.line(this.map(this.control[d].p2T),this.map(this.control[d].p1T)),DCHISEL.pen.solidCircle(this.map(this.control[d].p1T),b,"r"),this.hoverIndex===d&&1===this.hoverType&&DCHISEL.pen.solidCircle(this.map(this.control[d].p1T),2*b,"r")),(d<this.control.length-1||this.isClosed)&&(DCHISEL.pen.line(this.map(this.control[d].p2T),this.map(this.control[d].p3T)),DCHISEL.pen.solidCircle(this.map(this.control[d].p3T),b,"r"),this.hoverIndex===d&&3===this.hoverType&&DCHISEL.pen.solidCircle(this.map(this.control[d].p3T),2*b,"r")),DCHISEL.pen.color.fill(5,1),DCHISEL.pen.solidCircle(this.map(this.control[d].p2T),b,"r"),this.hoverIndex===d&&2===this.hoverType&&DCHISEL.pen.solidCircle(this.map(this.control[d].p2T),2*b,"r")},draw3:function(a,b){var c,d,e=this.divide(),f=this.divide();for(c=0,d=e.length;d>c;c+=1)e[c].z=DCHISEL.interpolateX(DCHISEL.masterPiece.side[0].divide(DCHISEL.mesh.n2),e[c].x)/DCHISEL.rDim.depthScale,e[c]=a.project(e[c]);for(DCHISEL.pen.color.stroke(7,1),DCHISEL.pen.start(),DCHISEL.pen.moveTo(this.map(e[0])),c=1,d=e.length;d>c;c+=1)DCHISEL.pen.lineTo(this.map(e[c]));for(DCHISEL.pen.stroke(b),DCHISEL.pen.end(),c=0,d=f.length;d>c;c+=1)f[c].z=DCHISEL.interpolateX(DCHISEL.masterPiece.side[1].divide(DCHISEL.mesh.n2),f[c].x)/DCHISEL.rDim.depthScale,f[c]=a.project(f[c]);for(DCHISEL.pen.color.stroke(7,1),DCHISEL.pen.start(),DCHISEL.pen.moveTo(this.map(f[0])),c=1,d=f.length;d>c;c+=1)DCHISEL.pen.lineTo(this.map(f[c]));for(DCHISEL.pen.stroke(b/2),DCHISEL.pen.end(),c=0,d=f.length;d>c;c+=5)DCHISEL.pen.start(),DCHISEL.pen.moveTo(this.map(e[c])),DCHISEL.pen.lineTo(this.map(f[c])),DCHISEL.pen.stroke(b/4),DCHISEL.pen.end()},copy:function(a){var b,c=(a.x,a.y,a.z,new DCHISEL.BezierObject([],this.theta,this.p0.x,this.p0.y,this.scale,this.isClosed,this.constrainedEnds));for(b=0,max=this.control.length;max>b;b+=1)c.control.push(new DCHISEL.BezierHandle(this.control[b].p1.add(a),this.control[b].p2.add(a),this.control[b].p3.add(a)));return c},make3D:function(a){var b,c,d=new DCHISEL.BezierObject([],-1,-1,x0_3D,y0_3D,scale_3D,this.isClosed);for(b=0,c=this.control.length;c>b;b++)d.control.push(new DCHISEL.BezierHandle(a.project(this.control[b].p1),a.project(this.control[b].p2),a.project(this.control[b].p3)));return d},mouseMove:function(){var a,b,c,d,e,f;if(d=(DCHISEL.mouse.x-DCHISEL.mouse.xDrag)/DCHISEL.minWH/this.scale,e=(DCHISEL.mouse.y-DCHISEL.mouse.yDrag)/DCHISEL.minWH/this.scale,DCHISEL.mouse.isDragging){if(-1===this.hoverIndex)this.allow.pan&&(this.p0T.x=this.p0.x+(DCHISEL.mouse.x-DCHISEL.mouse.xDrag)/DCHISEL.W,this.p0T.y=this.p0.y+(DCHISEL.mouse.y-DCHISEL.mouse.yDrag)/DCHISEL.H);else if(this.allow.edit)switch(f=!this.constrainedEnds||0!==this.hoverIndex&&this.hoverIndex!==this.control.length-1||2!==this.hoverType?1:0,this.hoverType){case 2:this.control[this.hoverIndex].p2T.x=this.control[this.hoverIndex].p2.x+d*f,this.control[this.hoverIndex].p2T.y=this.control[this.hoverIndex].p2.y+e,this.control[this.hoverIndex].p1T.x=this.control[this.hoverIndex].p1.x+d*f,this.control[this.hoverIndex].p1T.y=this.control[this.hoverIndex].p1.y+e,this.control[this.hoverIndex].p3T.x=this.control[this.hoverIndex].p3.x+d*f,this.control[this.hoverIndex].p3T.y=this.control[this.hoverIndex].p3.y+e;break;case 1:this.control[this.hoverIndex].p1T.x=this.control[this.hoverIndex].p1.x+d,this.control[this.hoverIndex].p1T.y=this.control[this.hoverIndex].p1.y+e,this.control[this.hoverIndex].kink1||this.control[this.hoverIndex].kink2||"mode2"!==DCHISEL.mode&&"mode3"!==DCHISEL.mode||(k=this.control[this.hoverIndex].d3/this.control[this.hoverIndex].d1,this.control[this.hoverIndex].p3T.x=this.control[this.hoverIndex].p3.x-k*d,this.control[this.hoverIndex].p3T.y=this.control[this.hoverIndex].p3.y-k*e,"mode2"===DCHISEL.mode&&this.control[this.hoverIndex].normalize3T(this.control[this.hoverIndex].d3));break;case 3:this.control[this.hoverIndex].p3T.x=this.control[this.hoverIndex].p3.x+d,this.control[this.hoverIndex].p3T.y=this.control[this.hoverIndex].p3.y+e,this.control[this.hoverIndex].kink1||this.control[this.hoverIndex].kink2||"mode2"!==DCHISEL.mode&&"mode3"!==DCHISEL.mode||(k=this.control[this.hoverIndex].d1/this.control[this.hoverIndex].d3,this.control[this.hoverIndex].p1T.x=this.control[this.hoverIndex].p1.x-k*d,this.control[this.hoverIndex].p1T.y=this.control[this.hoverIndex].p1.y-k*e,"mode2"===DCHISEL.mode&&this.control[this.hoverIndex].normalize1T(this.control[this.hoverIndex].d1))}}else{anyLuck=!1;for(var g=0;g<this.control.length;g++)a=DCHISEL.getDistanceVV(DCHISEL.mouse,this.map(this.control[g].p1)),b=DCHISEL.getDistanceVV(DCHISEL.mouse,this.map(this.control[g].p2)),c=DCHISEL.getDistanceVV(DCHISEL.mouse,this.map(this.control[g].p3)),a<DCHISEL.minWH*this.tol&&(this.hoverIndex=g,this.hoverType=1,anyLuck=!0),c<DCHISEL.minWH*this.tol&&(this.hoverIndex=g,this.hoverType=3,anyLuck=!0),b<DCHISEL.minWH*this.tol&&(this.hoverIndex=g,this.hoverType=2,anyLuck=!0);anyLuck||(this.hoverIndex=-1,this.hoverType=-1)}},mouseUp:function(){-1!==this.hoverIndex?this.control[this.hoverIndex].update():-1===this.hoverIndex&&(this.p0.x=this.p0T.x,this.p0.y=this.p0T.y)},mouseDown:function(){"smooth"===DCHISEL.mode&&-1!==this.hoverIndex&&2===this.hoverType&&this.control[this.hoverIndex].smooth()},exportSVG:function(){var a="";a+="<svg ",a+='version="1.1" ',a+='id="trace" ',a+='xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ',a+='viewBox="0 0 200 100" ',a+='style="enable-background:new 0 0 200 100;" xml:space="preserve" >\n',a+='<path style="fill:none;stroke-width:4;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;" ',a+='d="M'+((this.control[0].p2.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[0].p2.y+.5)*DCHISEL.rDim.l).toFixed(2)+"\n";for(var b=1;b<this.control.length;b++)a+="C"+((this.control[b-1].p3.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[b-1].p3.y+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[b].p1.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[b].p1.y+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[b].p2.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[b].p2.y+.5)*DCHISEL.rDim.l).toFixed(2)+"\n";return a+="C"+((this.control[this.control.length-1].p3.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[this.control.length-1].p3.y+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[0].p1.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[0].p1.y+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[0].p2.x+.5)*DCHISEL.rDim.l).toFixed(2)+","+((this.control[0].p2.y+.5)*DCHISEL.rDim.l).toFixed(2)+'z"/>',a+="</svg>"},exportRhinoScriptPython:function(a,b,c){var d,e,f,g="";for(g+='\n	rs.AddLayer("'+a+'")\n',g+='	rs.CurrentLayer("'+a+'")\n',g+="\n	pts = []",g+="\n	"+a+"_crvs = []\n\n",e=0,f=this.control.length;f>e;e++)c?(g+="	pts.append(rs.AddPoint(["+(this.control[e].p1.x*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p1.y*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p1.z*DCHISEL.rDim.l).toFixed(2)+"]))\n",g+="	pts.append(rs.AddPoint(["+(this.control[e].p2.x*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p2.y*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p2.z*DCHISEL.rDim.l).toFixed(2)+"]))\n",g+="	pts.append(rs.AddPoint(["+(this.control[e].p3.x*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p3.y*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p3.z*DCHISEL.rDim.l).toFixed(2)+"]))\n"):(g+="	pts.append(rs.AddPoint(["+(this.control[e].p1.x*DCHISEL.rDim.l*1.05).toFixed(2)+","+(this.control[e].p1.z*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p1.y*DCHISEL.rDim.l/DCHISEL.rDim.depthScale).toFixed(2)+"]))\n",g+="	pts.append(rs.AddPoint(["+(this.control[e].p2.x*DCHISEL.rDim.l*1.05).toFixed(2)+","+(this.control[e].p2.z*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p2.y*DCHISEL.rDim.l/DCHISEL.rDim.depthScale).toFixed(2)+"]))\n",g+="	pts.append(rs.AddPoint(["+(this.control[e].p3.x*DCHISEL.rDim.l*1.05).toFixed(2)+","+(this.control[e].p3.z*DCHISEL.rDim.l).toFixed(2)+","+(this.control[e].p3.y*DCHISEL.rDim.l/DCHISEL.rDim.depthScale).toFixed(2)+"]))\n");for(e=0,f=this.control.length;f>e;e+=1)d="",e<this.control.length-1?(d+="pts["+(3*e+1)+"],",0!==this.control[e].d3&&(d+="pts["+(3*e+2)+"],"),0!==this.control[e+1].d1&&(d+="pts["+(3*e+3)+"],"),d+="pts["+(3*e+4)+"]",g+="\n	"+a+"_crvs.append(rs.AddCurve(["+d+"]))"):this.isClosed&&(d+="pts["+(3*e+1)+"],",0!==this.control[e].d3&&(d+="pts["+(3*e+2)+"],"),0!==this.control[0].d1&&(d+="pts[0],"),d+="pts[1]",g+="\n	"+a+"_crvs.append(rs.AddCurve(["+d+"]))");return g+="\n\n	"+a+"=rs.JoinCurves("+a+"_crvs, True);\n\n",c?(g+="\n	"+a+"_extrudePath1 = rs.AddLine([0,0,0],[0,0,"+-DCHISEL.rDim.l/2+"])",g+="\n	"+a+"_extrudePath2 = rs.AddLine([0,0,0],[0,0,"+DCHISEL.rDim.l/2+"])"):(g+="\n	"+a+"_extrudePath1 = rs.AddLine([0,0,0],[0,"+-DCHISEL.rDim.l/2+",0])",g+="\n	"+a+"_extrudePath2 = rs.AddLine([0,0,0],[0,"+DCHISEL.rDim.l/2+",0])"),g+="\n	"+a+"_srf1 = rs.ExtrudeCurve("+a+","+a+"_extrudePath1)",g+="\n	"+a+"_srf2 = rs.ExtrudeCurve("+a+","+a+"_extrudePath2)",g+="\n	"+a+"_srf = rs.JoinSurfaces(["+a+"_srf1,"+a+"_srf2], True)",g+="\n\n\n"}},DCHISEL.intro={1:function(){var a;a=DCHISEL.sineAnimate(4*DCHISEL.anim.speed,0,0,DCHISEL.anim.speed),DCHISEL.pen.write("Yourk",.5,.34,2,1,a),a=DCHISEL.sineAnimate(3*DCHISEL.anim.speed,0,DCHISEL.anim.speed,2*DCHISEL.anim.speed),DCHISEL.pen.write("Guided Design in the Browser",.5,.41,1.33,2,a),a=DCHISEL.sineAnimate(3*DCHISEL.anim.speed,0,2*DCHISEL.anim.speed,3*DCHISEL.anim.speed),DCHISEL.pen.write("a tool inspired by and dedicated to",.5,.7,1,2,a),a=DCHISEL.sineAnimate(3*DCHISEL.anim.speed,0,3*DCHISEL.anim.speed,4*DCHISEL.anim.speed),DCHISEL.pen.write("Maya Kryvitskaya Davis and Stephen Davis",.5,.74,1.2,2,a),a=DCHISEL.sineAnimate(1.8*DCHISEL.anim.speed,0,4*DCHISEL.anim.speed,10*DCHISEL.anim.speed),DCHISEL.pen.write("~ click to proceed ~",.5,.5,.9,2,a)},2:function(){var a;a=DCHISEL.sineAnimate(4*DCHISEL.anim.speed,0,0,DCHISEL.anim.speed),DCHISEL.pen.write("if you could choose the exact fork design for your next meal...",.5,.3,1.3,2,a),a=DCHISEL.sineAnimate(4*DCHISEL.anim.speed,0,DCHISEL.anim.speed,2*DCHISEL.anim.speed),DCHISEL.pen.write("whether a light snack or a greedy feast",.5,.4,1,2,a),a=DCHISEL.sineAnimate(4*DCHISEL.anim.speed,0,2*DCHISEL.anim.speed,3*DCHISEL.anim.speed),DCHISEL.pen.write("a fast-food takeout, a barbecue or an elaborate home-cooked dinner",.5,.44,1,2,a),a=DCHISEL.sineAnimate(4*DCHISEL.anim.speed,0,3*DCHISEL.anim.speed,4*DCHISEL.anim.speed),DCHISEL.pen.write("what would it be?",.5,.57,1.3,2,a)},run:function(){"undefined"!=typeof this[DCHISEL.stage.no]&&this[DCHISEL.stage.no]()}},DCHISEL.tutorialText={3:["Let's walk through how to edit the fork above to your desired 3d shape.","Use the arrows and the X icon to navigate or quit this tutorial.",""],3.1:["Let's start 2d. See what happens if you drag the colored points around a bit!","If you have worked in a vector drawing application before, this should be familiar.","If not, this is a great start - we've made it much easier to learn and use."],3.2:["Congratulations, you've made your first edits!","Feel free to play around here - this kind of 'drawing' does takes some practice.","After a while, though, you'll be amazed at how much control it offers."],3.3:["More drawing? By the way, these points are called control points.","They accurately describe a complex curved shape","Thank you, Mr. Bezier!"],3.4:["Notice how the purple dots move together and the smoothness is always maintained.","This might not always be what you want.","Swap around the three drawing modes above to see what else you can do."],3.5:["Notice that if you use Drawing Mode 1, you can introduce a kink in the shape.","Check out the smooth option to get rid of it!",""],3.6:["Great! We've added a few more menu options to help you view your creation.","- from close-up, from afar, just the way you found it, or without control points -","- as well as an option to center back your drawing again -"],3.7:["And now, prep yourself for some free-dee magic!","This fork so far is a flat object with a uniform thickness to it.","You'd have a hard time with your salads if we stuck to that. Worry not, we won't!"],3.8:["The two curves on the left control the depth profile of the fork.","Which is, in plain words, how depth changes along the length.","Now go ahead and change these curves. See what happens to your creation on the right."],3.9:["I hope that's catching your attention somewhat - we'll leave you to it now.","Wish you lots of joys as you engage in this simple guided design.","Oh, and just for the record: this is clean, 3d-printer ready geometry - congratulations!"],current:function(){return this[DCHISEL.stage.no]}},DCHISEL.masterPiece.build=function(){var a,b="M308.25,72c-31.917,67.667,13.227,76.111,14.25,134.674C324,292.5,296.853,335.5,344,337.5c54.951,2.331,18.061-68.047,14-134.5c-3.031-49.593,45.666-48.666,11.123-131.652c0,0-7.873,18.527-7.373,41.152c0.324,14.677-5.083,18.167-5.083,18.167s-6.375-4.592-6.167-22.542c0.25-21.625-10.493-33-10.493-33S329.875,85.25,330.25,107.5c0.265,15.743-6.25,23.501-6.25,23.501s-6.5-7.001-6-23.251C318.647,86.707,308.25,72,308.25,72z",c=[];for(DCHISEL.masterPiece.plan=[],DCHISEL.masterPiece.plan[0]=new DCHISEL.BezierObject(b,-Math.PI/2,.5,.42,.9,!0),DCHISEL.masterPiece.plan[0].normalize(),DCHISEL.masterPiece.plan[0].setSubdivisions(DCHISEL.mesh.n1),DCHISEL.masterPiece.plan.sMgmt={1:{allow:{draw:"no",edit:!1,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},2:{allow:{draw:"no",edit:!1,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3:{allow:{draw:"2d_view",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.1:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.2:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.3:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.4:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.5:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.6:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.5,.42),scale:.9},3.7:{allow:{draw:"3d",edit:!1,pan:!1},p0T:new DCHISEL.Vector(.6,.3),scale:.9},3.8:{allow:{draw:"3d",edit:!1,pan:!1},p0T:new DCHISEL.Vector(.7,.3),scale:.7},3.9:{allow:{draw:"3d",edit:!1,pan:!1},p0T:new DCHISEL.Vector(.7,.3),scale:.7},4:{allow:{draw:"2d_edit",edit:!0,pan:!0},p0T:new DCHISEL.Vector(.5,.42),scale:.9},5:{allow:{draw:"3d",edit:!1,pan:!1},p0T:new DCHISEL.Vector(.7,.3),scale:.7},current:function(){return this[DCHISEL.stage.no]
}},DCHISEL.masterPiece.plan.stageUpdate=function(){"undefined"!=typeof this.sMgmt.current()&&(this[0].p0T=this.sMgmt.current().p0T.copy(),this[0].scale=this.sMgmt.current().scale,this[0].allow.edit=this.sMgmt.current().allow.edit,this[0].allow.pan=this.sMgmt.current().allow.pan)},a=DCHISEL.rDim.d/DCHISEL.rDim.l*DCHISEL.rDim.depthScale,i=0;i<DCHISEL.mesh.nP;i++)c.push(new DCHISEL.BezierHandle(new DCHISEL.Vector((i-.3)/(DCHISEL.mesh.nP-1)-.5,-a/2,0),new DCHISEL.Vector((i+0)/(DCHISEL.mesh.nP-1)-.5,-a/2,0),new DCHISEL.Vector((i+.3)/(DCHISEL.mesh.nP-1)-.5,-a/2,0)));DCHISEL.masterPiece.side=[],DCHISEL.masterPiece.side[0]=new DCHISEL.BezierObject(c,0,.3,.4,.5,!1,!0),DCHISEL.masterPiece.side[1]=DCHISEL.masterPiece.side[0].copy(new DCHISEL.Vector(0,a,0)),DCHISEL.masterPiece.side.sMgmt={3.8:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.3,.4),scale:.5},3.9:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.3,.4),scale:.5},5:{allow:{draw:"2d_edit",edit:!0,pan:!1},p0T:new DCHISEL.Vector(.25,.7),scale:.5},current:function(){return this[DCHISEL.stage.no]}},DCHISEL.masterPiece.side.stageUpdate=function(){"undefined"!=typeof this.sMgmt.current()&&(this[0].p0T=this.sMgmt.current().p0T.copy(),this[1].p0T=this.sMgmt.current().p0T.copy(),this[0].scale=this[1].scale=this.sMgmt.current().scale,this[0].allow.edit=this[1].allow.edit=this.sMgmt.current().allow.edit,this[0].allow.pan=this[1].allow.pan=this.sMgmt.current().allow.pan)},DCHISEL.masterPiece.stageUpdate=function(){this.plan.stageUpdate(),this.side.stageUpdate()},DCHISEL.masterPiece.draw=function(){var a;"undefined"!=typeof this.plan.sMgmt.current()&&(a=this.plan.sMgmt.current().allow.draw,"2d_view"===a?this.plan[0].draw(1,0,0):"2d_edit"===a?this.plan[0].draw(1,2,.5):"3d"===a&&this.plan[0].draw3(DCHISEL.cam,1,1,1)),"undefined"!=typeof this.side.sMgmt.current()&&(a=this.side.sMgmt.current().allow.draw,"2d_view"===a?(this.side[0].draw(1,0,0),this.side[1].draw(1,0,0)):"2d_edit"===a&&(this.side[0].draw(1,2,.5),this.side[1].draw(1,2,.5)))},DCHISEL.masterPiece.mouseMove=function(){var a,b;"undefined"!=typeof this.plan.sMgmt.current()&&(a=this.plan.sMgmt.current().allow.edit,b=this.plan.sMgmt.current().allow.pan,this.plan[0].mouseMove(b)),"undefined"!=typeof this.side.sMgmt.current()&&(a=this.side.sMgmt.current().allow.draw,b=this.side.sMgmt.current().allow.pan,this.side[0].mouseMove(!1),this.side[1].mouseMove(!1))},DCHISEL.masterPiece.mouseUp=function(){"undefined"!=typeof this.plan.sMgmt.current()&&this.plan[0].mouseUp(),"undefined"!=typeof this.side.sMgmt.current()&&(this.side[0].mouseUp(),this.side[1].mouseUp())},DCHISEL.cam=new DCHISEL.Camera(.7,50*Math.PI/180,-40*Math.PI/180,.6),DCHISEL.cam.buildEye()}(),DCHISEL.allButtons={mode1:{helpText:"drawing mode 1 - independent handles",onClick:function(){DCHISEL.activeMode=0,DCHISEL.mode="mode1"}},mode2:{helpText:"drawing mode 2 - partially coupled handles",onClick:function(){DCHISEL.activeMode=1,DCHISEL.mode="mode2"}},mode3:{helpText:"drawing mode 3 - fully coupled handles",onClick:function(){DCHISEL.mode="mode3"}},smooth:{helpText:"smooth kink",onClick:function(){DCHISEL.mode="smooth"}},preview:{helpText:"preview - hide control points",onClick:function(){DCHISEL.mode="preview"}},"3dpreview":{helpText:"rotate 3d view",onClick:function(){DCHISEL.mode="3dpreview"}},zoomIn:{helpText:"zoom in",onClick:function(){DCHISEL.masterPiece.plan[0].scale*=1.15}},zoomOut:{helpText:"zoom out",onClick:function(){DCHISEL.masterPiece.plan[0].scale/=1.15}},extents:{helpText:"zoom extents",onClick:function(){DCHISEL.masterPiece.plan.stageUpdate()}},backward:{helpText:"back",onClick:function(){DCHISEL.stage.no>3&&DCHISEL.stage.change(-.1),DCHISEL.masterPiece.stageUpdate()}},forward:{helpText:"forward",onClick:function(){DCHISEL.stage.change(.1),DCHISEL.masterPiece.stageUpdate()}},skip:{helpText:"skip tutorial",onClick:function(){DCHISEL.stage.set(4),DCHISEL.mode="mode3",DCHISEL.masterPiece.stageUpdate()}},"2d":{helpText:"back to 2d design",onClick:function(){DCHISEL.stage.change(-1),DCHISEL.mode="mode3",DCHISEL.masterPiece.stageUpdate()}},"3d":{helpText:"proceed to 3d design",onClick:function(){DCHISEL.masterPiece.plan[0].normalize(),DCHISEL.stage.change(1),DCHISEL.mode="3dpreview",DCHISEL.masterPiece.stageUpdate()}},doc:{helpText:"documentation",onClick:function(){OpenInNewTab("doc/YourkDoc.html")}},downloadSVG:{helpText:"download SVG",onClick:function(){{var a="data:image/svg+xml,"+encodeURIComponent(DCHISEL.masterPiece.plan[0].exportSVG());window.open(a)}}},downloadPython:{helpText:"download Python script for Rhino3d",onClick:function(){{var a="import rhinoscriptsyntax as rs\n\nimport math\n\ndef Main():\n\n",b="Main()",c=a+DCHISEL.masterPiece.plan[0].exportRhinoScriptPython("plan",1,!0)+DCHISEL.masterPiece.side[0].exportRhinoScriptPython("profileTop",2.1,!1)+DCHISEL.masterPiece.side[1].exportRhinoScriptPython("profileBottom",2.2,!1)+b,d="data:text/py,"+encodeURIComponent(c);window.open(d)}}}},DCHISEL.loadButtonImages=function(){var a,b;for(b in DCHISEL.allButtons)a=new Image,a.src="images/buttonImages/"+b+".png",DCHISEL.allButtons[b].image=a}(),DCHISEL.buildNav=function(){DCHISEL.nav=[],DCHISEL.nav[3]=new DCHISEL.Navigation({buttons:[{name:"backward",x:.1,y:.35,animate:!0},{name:"forward",x:.9,y:.35,animate:!0},{name:"skip",x:.9,y:.15,animate:!0}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.1]=new DCHISEL.Navigation({buttons:[{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.2]=new DCHISEL.Navigation({buttons:[{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.3]=new DCHISEL.Navigation({buttons:[{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.7]=new DCHISEL.Navigation({buttons:[{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.4]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.44,y:.15,animate:!0},{name:"mode2",x:.5,y:.15,animate:!0},{name:"mode3",x:.56,y:.15,animate:!0},{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.4].buttonGroups=[[0,1,2]],DCHISEL.nav[3.5]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.41,y:.15,animate:!1},{name:"mode2",x:.47,y:.15,animate:!1},{name:"mode3",x:.53,y:.15,animate:!1},{name:"smooth",x:.59,y:.15,animate:!0},{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.5].buttonGroups=[[0,1,2],[3]],DCHISEL.nav[3.6]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.29,y:.15,animate:!1},{name:"mode2",x:.35,y:.15,animate:!1},{name:"mode3",x:.41,y:.15,animate:!1},{name:"smooth",x:.47,y:.15,animate:!1},{name:"preview",x:.53,y:.15,animate:!0},{name:"zoomIn",x:.59,y:.15,animate:!0},{name:"zoomOut",x:.65,y:.15,animate:!0},{name:"extents",x:.71,y:.15,animate:!0},{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.6].buttonGroups=[[0,1,2,3],[4],[5,6,7]],DCHISEL.nav[3.8]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.44,y:.15,animate:!1},{name:"mode2",x:.5,y:.15,animate:!1},{name:"mode3",x:.56,y:.15,animate:!1},{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.8].buttonGroups=[[0,1,2]],DCHISEL.nav[3.9]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.44,y:.15,animate:!1},{name:"mode2",x:.5,y:.15,animate:!1},{name:"mode3",x:.56,y:.15,animate:!1},{name:"backward",x:.1,y:.35,animate:!1},{name:"forward",x:.9,y:.35,animate:!1},{name:"skip",x:.9,y:.15,animate:!1}],displayHelp:!1,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[3.9].buttonGroups=[[0,1,2]],DCHISEL.nav[4]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.1,y:.15,animate:!1},{name:"mode2",x:.1,y:.2375,animate:!1},{name:"mode3",x:.1,y:.15+.175,animate:!1},{name:"smooth",x:.1,y:.4125,animate:!1},{name:"preview",x:.1,y:.5,animate:!1},{name:"downloadSVG",x:.1,y:.5875,animate:!1},{name:"zoomIn",x:.1,y:.15+6*.0875,animate:!1},{name:"zoomOut",x:.1,y:.7625,animate:!1},{name:"extents",x:.1,y:.85,animate:!1},{name:"3d",x:.9,y:.15,animate:!1},{name:"doc",x:.9,y:.2375,animate:!1}],displayHelp:!0,xHelp:.5,yHelp:.85,defaultMode:"mode3"}),DCHISEL.nav[4].buttonGroups=[[0,1,2,3],[4,5],[6,7,8],[9,10]],DCHISEL.nav[5]=new DCHISEL.Navigation({buttons:[{name:"mode1",x:.16,y:.55,animate:!1},{name:"mode2",x:.22,y:.55,animate:!1},{name:"mode3",x:.28,y:.55,animate:!1},{name:"2d",x:.16,y:.17,animate:!1},{name:"3dpreview",x:.22,y:.17,animate:!1},{name:"downloadPython",x:.28,y:.17,animate:!1}],displayHelp:!0,xHelp:.7,yHelp:.85,defaultMode:"3dpreview"}),DCHISEL.nav[5].buttonGroups=[[0,1,2],[3,4,5]],DCHISEL.nav.current=function(){return DCHISEL.nav[DCHISEL.stage.no]},DCHISEL.nav.place=function(){"undefined"!=typeof DCHISEL.nav[DCHISEL.stage.no]&&DCHISEL.nav[DCHISEL.stage.no].place()},DCHISEL.nav.mouseDown=function(){"undefined"!=typeof this.current()&&this.current().mouseDown()},DCHISEL.nav.mouseMove=function(){"undefined"!=typeof this.current()&&this.current().mouseMove()}}(),DCHISEL.mouseDown=function(a){DCHISEL.updateMouse(a,"down"),DCHISEL.stage.no<3&&DCHISEL.stage.change(1),DCHISEL.nav.mouseDown(),DCHISEL.masterPiece.plan[0].mouseDown()},DCHISEL.mouseMove=function(a){DCHISEL.updateMouse(a,"move"),DCHISEL.nav.mouseMove(),DCHISEL.masterPiece.mouseMove(),5===DCHISEL.stage.no&&"3dpreview"===DCHISEL.mode&&DCHISEL.cam.mouseMove()},DCHISEL.mouseUp=function(a){DCHISEL.updateMouse(a,"up"),DCHISEL.masterPiece.mouseUp(),5===DCHISEL.stage.no&&"3dpreview"===DCHISEL.mode&&DCHISEL.cam.update()},DCHISEL.draw=function(){DCHISEL.prepDraw(),DCHISEL.nav.place(),"undefined"!=typeof DCHISEL.tutorialText[DCHISEL.stage.no]&&(DCHISEL.pen.write(DCHISEL.tutorialText.current()[0],.5,.75,1,2,1),DCHISEL.pen.write(DCHISEL.tutorialText.current()[1],.5,.8,1,2,1),DCHISEL.pen.write(DCHISEL.tutorialText.current()[2],.5,.85,1,2,1)),DCHISEL.intro.run(),DCHISEL.masterPiece.draw(),0===DCHISEL.stage.no&&DCHISEL.stage.change(1),5===DCHISEL.stage.no&&DCHISEL.pen.write("edit depth profile",.22,.45,1.2,3,1)},DCHISEL.init("wrapper",!0,"purple"),DCHISEL.launch();
//# sourceMappingURL=Yourk-v1.0.0.min.js.map